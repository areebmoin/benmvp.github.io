webpackJsonp([0x66ade352eaa6],{825:function(n,a){n.exports={data:{post:{id:"/home/travis/build/benmvp/benmvp.github.io/content/posts/2015-12-20--learning-es6-new-collections/index.md absPath of file >>> MarkdownRemark",html:'<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/many-coins-ee61c4debabeb34c2a48943ee402f925-d7189.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 79.49152542372882%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAdBlArlxn//EABoQAQADAAMAAAAAAAAAAAAAAAEAAhEhIjL/2gAIAQEAAQUC53tAvHCx6DD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIhMhD/2gAIAQEABj8Cdm0aHTMy5//EABsQAQEBAAIDAAAAAAAAAAAAAAERACExQZHw/9oACAEBAAE/IbPI+W976OaWXAPofWhh5GYpG//aAAwDAQACAAMAAAAQyw//xAAYEQACAwAAAAAAAAAAAAAAAAABEBEhUf/aAAgBAwEBPxACLxf/xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QVcn/xAAeEAEAAgEEAwAAAAAAAAAAAAABABEhMUFRoWFxwf/aAAgBAQABPxDQwOzPAjigRQje/WncpIy2NXGghg+phoMjh5cdQTdRuz//2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px transparent;"\n        alt="A collection of different coins"\n        title=""\n        src="/static/many-coins-ee61c4debabeb34c2a48943ee402f925-d7189.jpg"\n        srcset="/static/many-coins-ee61c4debabeb34c2a48943ee402f925-39eff.jpg 200w,\n/static/many-coins-ee61c4debabeb34c2a48943ee402f925-aee9a.jpg 400w,\n/static/many-coins-ee61c4debabeb34c2a48943ee402f925-d7189.jpg 590w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Now that we covered <a href="/learning-es6-classes/">ES6 classes</a> we should be through all of the syntactic sugar that ECMAScript 6 offers. We can now focus on the new functionality introduced with ES6. The main focus in the next few articles will be all about asynchronous programming. We’ll ultimately talk about generators, but there are a few building blocks we need to get through first. The new collections we’ll talk about now aren’t really building blocks for generators, but I feel that they are important to learn. In addition, they are types of <em>iterables</em> which we’ll deep dive into in the next article.</p>\n<h2 id="tldr"><a href="#tldr" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>\n<p>ES6 introduces four new efficient collection data structures to mitigate our ab-use of object and array literals.</p>\n<p>A <code class="language-text">Set</code> contains a unique set of values of any type:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">\'Ben\'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">\'Ilegbodu\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 6</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: true</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">\'Ben\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p><code class="language-text">Map</code> provides a mapping of keys of any type to values of any type:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nmap<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">\'foo\'</span><span class="token punctuation">,</span> <span class="token string">\'bar\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nmap<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">\'Ben\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// non-strings can be keys</span>\n\n<span class="token comment">// output: Ben</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 2</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p><code class="language-text">WeakMap</code> provides memory leak-free lookup of objects to values of any type:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> $leftButton <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">\'#leftButton\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> domMetadata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ndomMetadata<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>$leftButton<span class="token punctuation">,</span> <span class="token punctuation">{</span>clickCount<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p><code class="language-text">WeakSet</code> provides memory leak-free collection of unique objects:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> $leftButton <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">\'#leftButton\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> clickedDomNodes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nclickedDomNodes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>$leftButton<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>The differences between the 4 collection types are subtle but important. Be sure to clone the <a href="https://github.com/benmvp/learning-es6"><em>Learning ES6</em> Github repo</a> and take a look at the <a href="/learning-es6/#new-collections">new collections code examples</a> page showing off the features in greater detail.</p>\n<p>To learn <em>how</em> to use these collections you could just read documentation because they are just new APIs. However, to know <em>why</em> you would want to use each one, I suggest you keep reading.</p>\n<h2 id="code-classlanguage-textmapcode"><a href="#code-classlanguage-textmapcode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">Map</code></h2>\n<p>You may be thinking. Why do I need to use <code class="language-text">Map</code> when I can just use a POJO (plain ol’ JavaScript object)? At first glance it certainly does look just like an object literal. But up until now we have been abusing JavaScript objects as maps. They were intended for holding loosely, abtitrarily-nested structured data much like XML. But when there’s only one level indexed by string keys, they basically look like maps.</p>\n<p>ES6 now introduces a true map data structure appropriately called <code class="language-text">Map</code>.</p>\n<h3 id="constructor"><a href="#constructor" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Constructor</h3>\n<p>The <code class="language-text">Map</code> constructor takes an optional array of <code class="language-text">[key, value]</code> pairs that are added when the <code class="language-text">Map</code> is created. If you omit the array, an empty <code class="language-text">Map</code> object is created.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> allStarVotesEmpty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> steph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Stephen Curry\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> kobe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> lebron <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'LeBron James\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> allStarVotesInitialized <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n    <span class="token punctuation">[</span>steph<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>kobe<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>lebron<span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Right now, there doesn’t seem to be much difference between an object literal and a <code class="language-text">Map</code>. In fact the <code class="language-text">Map</code> seems like <em>more</em> syntax. But that’s about the change…</p>\n<h3 id="handling-values"><a href="#handling-values" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handling values</h3>\n<p>One limitation of using object literals as maps that you may have run into is that object literals only support using strings as keys. Any key you set on an object literal that is <strong>not</strong> a string will get coerced into one.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> steph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Stephen Curry\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> kobe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> lebron <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'LeBron James\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Build up votes lookup table using</span>\n<span class="token comment">// ES6 computed property keys</span>\n<span class="token keyword">let</span> allStarVotes <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token punctuation">[</span>steph<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>kobe<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>lebron<span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">22</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: true</span>\n<span class="token comment">// the player objects are coerced to the</span>\n<span class="token comment">// strings "[Object object]"</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'[Object object]\'</span> <span class="token keyword">in</span> allStarVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Another issue is the looseness in determining if a key is a part of a JavaScript object. Doing a truthy check doesn’t work if its value can be falsy:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> allStarVotes <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token string">\'Stephen Curry\'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>\n    <span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token string">\'LeBron James\'</span><span class="token punctuation">:</span> <span class="token number">22</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment">// truthy check doesn\'t work because 0 is a</span>\n<span class="token comment">// valid value and is falsy</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>allStarVotes<span class="token punctuation">[</span><span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Kobe Bryant is a candidate\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>Getting the size of the object is also not very straightforward nor efficient. The quickest way is to get the length from the array of keys.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> allStarVotes <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token string">\'Stephen Curry\'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>\n    <span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token string">\'LeBron James\'</span><span class="token punctuation">:</span> <span class="token number">22</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> numCandidates <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>allStarVotes<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Using vanilla JavaScript objects is also susceptible to a security issue because you could unintentionally overwrite properties inherited from <code class="language-text">Object.prototype</code> (such as <code class="language-text">toString</code>):</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> allStarVotes <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token string">\'Stephen Curry\'</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>\n    <span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    <span class="token string">\'LeBron James\'</span><span class="token punctuation">:</span> <span class="token number">22</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nallStarVotes<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token string">\'overwritten\'</span><span class="token punctuation">;</span>\n\n<span class="token comment">// Error!</span>\n<span class="token comment">// toString is not a function</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStarVotes<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p><code class="language-text">Map</code> clears up all of these issues.</p>\n<ul>\n<li><code class="language-text">Map.prototype.get(key)</code> retrieves the value mapped to <code class="language-text">key</code>. This replaces indexing into a vanilla JavaScript object using dot- or bracket-notation. It returns <code class="language-text">undefined</code> if the <code class="language-text">key</code> is not present. There’s no way of providing a default unfortunately.</li>\n<li><code class="language-text">Map.prototype.set(key, value)</code> maps the specified <code class="language-text">key</code> to the specified <code class="language-text">value</code>. This will overwrite any existing value for the <code class="language-text">key</code> or create a new one. This replaces assigning to a vanilla JavaScript object using dot- or bracket-notation. It returns a reference to the instance, so <code class="language-text">Map.prototype.set</code> is chainable.</li>\n<li><code class="language-text">Map.prototype.has(key)</code> checks for the existence of the specified <code class="language-text">key</code> in the map, solving the existence issues described above with vanilla JavaScript objects</li>\n<li><code class="language-text">Map.prototype.delete(key)</code> removes the value mapped to the specified <code class="language-text">key</code>, returning <code class="language-text">true</code> if the value was removed and <code class="language-text">false</code> otherwise. This replaces using the <code class="language-text">delete</code> keyword with either dot- or bracket-notation.</li>\n<li><code class="language-text">Map.prototype.clear()</code> removes all entries from the map. With vanilla JavaScript objects we would do <code class="language-text">map = {}</code>, but that just set <code class="language-text">map</code> to a new empty object as opposed to clearing it out.</li>\n<li><code class="language-text">Map.prototoype.size</code> efficiently returns the number of entries in the map.</li>\n</ul>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> steph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Stephen Curry\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> kobe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> lebron <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'LeBron James\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> allStarVotes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nallStarVotes<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>steph<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>kobe<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>lebron<span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 50</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStarVotes<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>steph<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: false</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStarVotes<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">\'Kevin Durant\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nallStarVotes<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>kobe<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 2</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStarVotes<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nallStarVotes<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 2</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStarVotes<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<h3 id="iterating"><a href="#iterating" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Iterating</h3>\n<p><code class="language-text">Map</code> provides three methods that return iterators over its data (in insertion order):</p>\n<ul>\n<li><code class="language-text">Map.prototype.keys()</code> returns an iterator over just the keys of the map</li>\n<li><code class="language-text">Map.prototype.values()</code> returns an iterator over just the values of the map</li>\n<li><code class="language-text">Map.prototype.entries()</code> returns an iterator over <code class="language-text">[key, value]</code> pairs of the map</li>\n</ul>\n<p>We haven’t actually talked about iterators and how they work yet (that’s coming up in the next article), but the following code should be pretty self-explanatory:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// log each player name since player</span>\n<span class="token comment">// is a key in the map</span>\nallStarVotes<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>player<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>player<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// log each all star vote count since</span>\n<span class="token comment">// count is a value in the map</span>\nallStarVotes<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// log each player name and his votes count</span>\n<span class="token comment">// together. Ex: \'Stephen Curry (50)</span>\n<span class="token comment">// Uses array destructuring to assign [key, value]</span>\n<span class="token comment">// pair into separate variables</span>\nallStarVotes<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>player<span class="token punctuation">,</span> count<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>player<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>We learned earlier that the <code class="language-text">Map</code> <a href="#constructor">constructor</a> accepts an array of <code class="language-text">[key, value]</code> pairs. That’s only a part of the story. It actually accepts any <em>iterable</em> of <code class="language-text">[key, value]</code> pairs. This means that we can quickly clone a <code class="language-text">Map</code> object by passing its <code class="language-text">Map.prototype.entries()</code> iterator to the constructor of a new <code class="language-text">Map</code> (because we just showed it returns an array of <code class="language-text">[key, value]</code>):</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> allStarVotesCopy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>allstarVotes<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>But actually, it gets even better. <code class="language-text">Map</code> objects have what’s called a <em>default iterator</em>. And that default iterator is  <code class="language-text">Map.prototype.entries()</code>. This means we can clone a <code class="language-text">Map</code> object by simply passing it into the constructor:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> allStarVotesCopy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>allstarVotes<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>The <code class="language-text">for-of</code> operator also works with a <em>default iterator</em> so we don’t need to call <code class="language-text">.entries()</code> when we loop:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// log each player name and his votes count</span>\n<span class="token comment">// together. Ex: \'Stephen Curry (50)</span>\n<span class="token comment">// Uses array destructuring to assign [key, value]</span>\n<span class="token comment">// pair into separate variables</span>\n<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>player<span class="token punctuation">,</span> count<span class="token punctuation">]</span> <span class="token keyword">of</span> allStarVotes<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>player<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>And since the constructor takes any iterable, we can also easily merge raw data with <code class="language-text">Map</code> objects to create a new object by using the <a href="/learning-es6-parameter-handling/#spread-operator">spread operator</a>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> durant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Kevin Durant\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> cp3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Chris Paul\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> theBrow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Anthony Davis\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> russell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Russell Westbrook\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> carmelo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Carmelo Anthony\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> moreAllStarVotes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\n    <span class="token punctuation">[</span>durant<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>cp3<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>theBrow<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span>\n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> rawData <span class="token operator">=</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">[</span>russell<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">[</span>carmelo<span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span>\n<span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> mergedMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>allStarVotes<span class="token punctuation">,</span> <span class="token operator">...</span>moreAllStarVotes<span class="token punctuation">,</span> <span class="token operator">...</span>rawData<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>The spread operator works with any <em>iterable</em> not just arrays, so we can use it to create a concatenated array literal, which we then pass into the <code class="language-text">Map</code> constructor. The amount of code or helper libraries it would take to do this in ES5 with vanilla JavaScript objects would be immense.</p>\n<p>And don’t worry if you don’t fully understand all of this iterator business. We’ll cover iterators and iterables in great detail in the next article. Hopefully having this background on collections will make that discussion make even more sense.</p>\n<p><code class="language-text">Map</code> also exposes <code class="language-text">Map.prototype.forEach(loopFunc)</code> which is similar to <code class="language-text">Array.prototype.forEach(loopFnc)</code> (introduced in ES5) and a functional approach to using <code class="language-text">Map.prototype.entries()</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js">allStarVotes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> player<span class="token punctuation">,</span> map<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>player<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> (</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>The third parameter passed to the function by <code class="language-text">Map.prototype.forEach()</code> (<code class="language-text">map</code> in the above example) is a reference back to the map object. In the case of the <a href="/learning-es6-arrow-functions/">arrow function</a> we used above, it wouldn’t be necessary because <code class="language-text">allStartVotes</code> is still in scope. But if we were instead passing a named function, having that third map reference parameter could come in handy.</p>\n<p>Although <code class="language-text">Map</code> does have <code class="language-text">forEach</code>, it doesn’t have <code class="language-text">filter</code> or <code class="language-text">map</code>. You will first have to convert the <code class="language-text">Map</code> object to an array of <code class="language-text">[key, value]</code> pairs (using the spread operator like <code class="language-text">[...allStarVotes]</code>), do the <code class="language-text">filter</code>/<code class="language-text">map</code> operation, and then construct a new <code class="language-text">Map</code> object from the result. Hopefully this functionality will be added in the future.</p>\n<h3 id="code-classlanguage-textmapcode-vs-code-classlanguage-textobjectcode"><a href="#code-classlanguage-textmapcode-vs-code-classlanguage-textobjectcode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">Map</code> vs <code class="language-text">Object</code></h3>\n<p>So now that we’ve learned about all that <code class="language-text">Map</code> can do, should we replace <strong>all</strong> uses of vanilla JavaScript objects with <code class="language-text">Map</code>? Well, not exactly. If you’re wanting to map anything other than strings to data values, you have no choice; you need to use <code class="language-text">Map</code>.</p>\n<p>However, if you’re mapping string keys to data values, you have options. A good rough guideline deals with the types of keys in your map. If you’re keys are fixed/static then just use a vanilla JavaScript object. It’s really simple to do <code class="language-text">map.keyName</code>. If your keys are dynamic (you’re indexing into the map using variables), then use a <code class="language-text">Map</code>: <code class="language-text">map.get(varString)</code>.</p>\n<h2 id="code-classlanguage-textweakmapcode"><a href="#code-classlanguage-textweakmapcode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">WeakMap</code></h2>\n<p>You’ve probably heard of a map before, but what’s a <em>weak</em> map? A <code class="language-text">WeakMap</code> is a subset of a <code class="language-text">Map</code>. You can call it a ”<code class="language-text">Map</code> with restrictions.” It’s not <em>iterable</em>, so it doesn’t have a <code class="language-text">.size</code> property nor <code class="language-text">.clear()</code>, <code class="language-text">.entries()</code>, <code class="language-text">.keys()</code>, <code class="language-text">.values()</code> or <code class="language-text">.forEach()</code> methods. All keys <em>must</em> be objects; no strings, numbers, booleans or symbols (more on these later) allowed.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> steph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Stephen Curry\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> kobe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> lebron <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'LeBron James\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> allStarVotesWeak <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nallStarVotesWeak<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>steph<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>kobe<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>lebron<span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 50</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStarVotesWeak<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>steph<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: false</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStarVotesWeak<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">\'Kevin Durant\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nallStarVotesWeak<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>kobe<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>It’s probably not immediately apparent why you would use a <code class="language-text">WeakMap</code> over a normal <code class="language-text">Map</code> when it’s so restrictive. And what’s up with it only supporting objects as keys? Well <a href="https://twitter.com/nzgb">Nicolas Bevacqua</a> explains it well in <a href="https://ponyfoo.com/articles/es6-weakmaps-sets-and-weaksets-in-depth">ES6 WeakMaps, Sets, and WeakSets in Depth</a>:</p>\n<blockquote>\n<p>The difference that may make <code class="language-text">WeakMap</code> worth it, is in its name. <code class="language-text">WeakMap</code> holds references to its keys <em>weakly</em>, meaning that if there are no other references to one of its keys, the object is subject to <strong>garbage collection</strong>.</p>\n</blockquote>\n<p>When you use an object as a key in a <code class="language-text">Map</code> object. Those object keys will never get garbage collected as long as the <code class="language-text">Map</code> object is around because the <code class="language-text">Map</code> object still has references to them. This can cause memory leaks if nothing else has references to these object keys. However, if the object keys in a <code class="language-text">WeakMap</code> have no other references to them, those objects will be removed from the <code class="language-text">WeakMap</code> object and available for garbage collection. This prevents the chance of a memory leak.</p>\n<p>One use case of a <code class="language-text">WeakMap</code> is if you want to attach some metadata to DOM objects. Lets say you want to keep track of how many times <code class="language-text">&lt;p&gt;</code> nodes on the page have been clicked:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// set up metadata click map</span>\n<span class="token keyword">let</span> clickMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// on each click, add the p to the map</span>\n<span class="token comment">// (with initial click) or increment its</span>\n<span class="token comment">// click count</span>\n<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">\'p\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> pNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>\n    <span class="token keyword">let</span> clicks <span class="token operator">=</span> clickMap<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>pNode<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>clicks<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n        clicks <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n\n    clicks<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>pNode<span class="token punctuation">,</span> <span class="token operator">++</span>clicks<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>The reason using a <code class="language-text">WeakMap</code> is advantageous in this example is that if a given <code class="language-text">&lt;p&gt;</code> node gets removed from the DOM, we don’t have to know when that happens in order to delete it from our map so that the node can be garbage collected. If the node is removed from the DOM and nothing else has a reference to it, then it will automagically be removed from our <code class="language-text">WeakMap</code> because it held a reference to the node <em>weakly</em>.</p>\n<h2 id="code-classlanguage-textsetcode"><a href="#code-classlanguage-textsetcode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">Set</code></h2>\n<p>A set can also be thought of as a subset of a map as well. You could think of it as a map where the keys don’t matter, but the values still need to remain distinct/unique. In fact, because ES5 didn’t have an explicit set data structure, the best workaround has been to use a vanilla JavaScript object making the elements of our “set” the keys of the object. The values in the object would be some truthy value (like <code class="language-text">1</code>) to make existence testing easier, but the values themselves didn’t really matter.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> nbaPlayers <span class="token operator">=</span> <span class="token punctuation">{</span>\n    <span class="token string">\'Stephen Curry\'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n    <span class="token string">\'LeBron James\'</span><span class="token punctuation">:</span> <span class="token boolean">true</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>nbaPlayers<span class="token punctuation">[</span><span class="token string">\'Stephen Curry\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// true</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Stephen Curry is an NBA player\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>nbaPlayers<span class="token punctuation">[</span><span class="token string">\'Ben Ilegbodu\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// false :\'(</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Ben Ilegbodu is an NBA player\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>This works pretty well, but it has the same drawback as vanilla JavaScript objects as maps. The keys have to be strings. ES6 includes the <code class="language-text">Set</code> data structure that will work with any values (not just strings).</p>\n<h3 id="constructor-1"><a href="#constructor-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Constructor</h3>\n<p>The constructor takes an optional <em>iterable</em> of values that can be added initially to the <code class="language-text">Set</code> object. If you choose to omit the iterable, then an empty <code class="language-text">Set</code> object is created.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> steph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Stephen Curry\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> kobe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> lebron <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'LeBron James\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> initializedSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span>steph<span class="token punctuation">,</span> kobe<span class="token punctuation">,</span> lebron<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> emptySet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<h3 id="handling-values-1"><a href="#handling-values-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Handling values</h3>\n<p><code class="language-text">Set</code> shares many of the same properties/methods as <code class="language-text">Map</code> too:</p>\n<ul>\n<li><code class="language-text">Set.prototype.size</code></li>\n<li><code class="language-text">Set.prototype.has(value)</code>, which is a lot faster than using <code class="language-text">Array.prototype.indexOf()</code></li>\n<li><code class="language-text">Set.prototype.delete(value)</code></li>\n<li><code class="language-text">Set.prototype.clear()</code></li>\n</ul>\n<p>There is no <code class="language-text">Set.prototype.get()</code> because there are no keys. And <code class="language-text">Map.prototype.set()</code> is replaced by <code class="language-text">Set.prototype.add(value)</code> for adding elements to the set. But just like <code class="language-text">Map.prototype.set()</code>, <code class="language-text">Set.prototype.add()</code> returns a reference to the instance so it’s chainable.</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> steph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Stephen Curry\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> kobe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'Kobe Bryant\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">let</span> lebron <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token string">\'LeBron James\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">let</span> allStars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nallStars<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>steph<span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>kobe<span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>steph<span class="token punctuation">)</span> <span class="token comment">// duplicates are removed</span>\n    <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>lebron<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: false</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStars<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">\'Kevin Durant\'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: true</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStars<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>kobe<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nallStars<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span>kobe<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 2</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStars<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nallStars<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 2</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStars<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>A couple of methods I wish <code class="language-text">Set</code> came with:</p>\n<ul>\n<li><code class="language-text">Set.prototype.addAll(iterable)</code> to add a list of items to the set in one call instead of having to iterate over a list and call <code class="language-text">Set.prototype.add()</code> on each iteration</li>\n<li><code class="language-text">Set.prototype.hasAll(iterable)</code> to check to see if every item in the list is in the set</li>\n<li><code class="language-text">Set.prototype.deleteAll(iterable)</code> to delete every item in the list from the set</li>\n</ul>\n<p>Maybe they will get added in future specifications.</p>\n<h3 id="iterating-1"><a href="#iterating-1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Iterating</h3>\n<p><code class="language-text">Set</code> has the same 3 methods that return iterators that <code class="language-text">Map</code> has:</p>\n<ul>\n<li><code class="language-text">Set.prototype.values()</code> returns an iterator over just the values of the set</li>\n<li><code class="language-text">Set.prototype.keys()</code> returns the same iterator as <code class="language-text">Set.prototype.values()</code> since <code class="language-text">Set</code> only has values. It exists for parity with <code class="language-text">Map</code></li>\n<li><code class="language-text">Set.prototype.entries()</code> returns an iterator over <code class="language-text">[key, value]</code> pairs of the set where <code class="language-text">key</code> and <code class="language-text">value</code> are the same values. It too exists for parity with <code class="language-text">Map</code></li>\n</ul>\n<p>The <em>default iterator</em> for <code class="language-text">Set</code> is <code class="language-text">Set.prototype.values()</code> so you can easily iterate over a <code class="language-text">Set</code> object with <code class="language-text">for-of</code> or <code class="language-text">Set.prototype.forEach()</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> allStar <span class="token keyword">in</span> allStars<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allStar<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\nallStars<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span> key<span class="token punctuation">,</span> setRef<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// In a set the value &amp; key are the same</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value <span class="token operator">===</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token comment">// The third parameter is a reference to the</span>\n    <span class="token comment">// instance</span>\n    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>setRef <span class="token operator">===</span> allStars<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>It also means that you can easily clone a <code class="language-text">Set</code> object since the constructor accepts an iterable:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">let</span> allStarsClone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>allStars<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>Lastly, you can combine <code class="language-text">Set</code>’s de-duping nature with the spread operator to create a de-dupe array helper:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">dedupe</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">let</span> noDupesArray <span class="token operator">=</span> <span class="token function">dedupe</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: [1, 2, 4, 7, 3]</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>noDupesArray<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<h3 id="set-operations"><a href="#set-operations" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Set operations</h3>\n<p>Common non-mutating operations performed on sets are <code class="language-text">union</code>, <code class="language-text">intersection</code>, and <code class="language-text">difference</code>. They’re <em>non-mutating</em> because they don’t change the underlying set but return a new object containing the items. Unfortunately, the <code class="language-text">Set</code> object in ECMAScript 6 does not have any of those methods. However, with some other ES6 functionality we can implement them ourselves.</p>\n<h4 id="union-implementation"><a href="#union-implementation" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Union implementation</h4>\n<p>Union (<code class="language-text">a ∪ b</code> in set notation) is a new <code class="language-text">Set</code> object that contains both the elements of set <code class="language-text">a</code> and set <code class="language-text">b</code>. This is pretty straightforward to implement in ES6. Using the spread operator, we can create an array which is the concatenation of both sets and then create a new <code class="language-text">Set</code> object from that (which will also de-dupe):</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">union</span><span class="token punctuation">(</span>setA<span class="token punctuation">,</span> setB<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>setA<span class="token punctuation">,</span> <span class="token operator">...</span>setB<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">let</span> setUnion <span class="token operator">=</span> <span class="token function">union</span><span class="token punctuation">(</span>\n    <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'a\'</span><span class="token punctuation">,</span> <span class="token string">\'b\'</span><span class="token punctuation">,</span> <span class="token string">\'c\'</span><span class="token punctuation">,</span> <span class="token string">\'d\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'d\'</span><span class="token punctuation">,</span> <span class="token string">\'e\'</span><span class="token punctuation">,</span> <span class="token string">\'f\'</span><span class="token punctuation">,</span> <span class="token string">\'g\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 8</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>setUnion<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<h4 id="intersection-implementation"><a href="#intersection-implementation" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Intersection implementation</h4>\n<p>Intersection (<code class="language-text">a ∩ b</code> in set notation) is a new <code class="language-text">Set</code> object that contains the elements that exist in both set <code class="language-text">a</code> and set <code class="language-text">b</code>. The implementation is a bit more involved, but not too bad. Essentially, we need to include the elements of <code class="language-text">a</code> in the new set if they exist in <code class="language-text">b</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">intersection</span><span class="token punctuation">(</span>setA<span class="token punctuation">,</span> setB<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>setA<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">=></span> setB<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">let</span> setIntersection <span class="token operator">=</span> <span class="token function">intersection</span><span class="token punctuation">(</span>\n    <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'a\'</span><span class="token punctuation">,</span> <span class="token string">\'b\'</span><span class="token punctuation">,</span> <span class="token string">\'c\'</span><span class="token punctuation">,</span> <span class="token string">\'d\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'d\'</span><span class="token punctuation">,</span> <span class="token string">\'e\'</span><span class="token punctuation">,</span> <span class="token string">\'f\'</span><span class="token punctuation">,</span> <span class="token string">\'g\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 1</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>setIntersection<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>So what we do is first convert <code class="language-text">setA</code> into an array (using the spread operator) so we can leverage <code class="language-text">Array.prototype.filter()</code>. Then once we’ve filtered out all the items in <code class="language-text">setB</code> that aren’t in <code class="language-text">setA</code> we have have an array of the intersection, which we convert into a <code class="language-text">Set</code> object.</p>\n<h4 id="difference-implementation"><a href="#difference-implementation" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Difference implementation</h4>\n<p>Difference (<code class="language-text">a \\ b</code>) is a new <code class="language-text">Set</code> object that contains the elements in <code class="language-text">a</code> that are not in <code class="language-text">b</code>. Its implementation is similar to <code class="language-text">intersection</code> except we want the ones in <code class="language-text">a</code> that are <strong>not</strong> in <code class="language-text">b</code>:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">difference</span><span class="token punctuation">(</span>setA<span class="token punctuation">,</span> setB<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>setA<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>item <span class="token operator">=></span> <span class="token operator">!</span>setB<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">let</span> setDifference <span class="token operator">=</span> <span class="token function">difference</span><span class="token punctuation">(</span>\n    <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'a\'</span><span class="token punctuation">,</span> <span class="token string">\'b\'</span><span class="token punctuation">,</span> <span class="token string">\'c\'</span><span class="token punctuation">,</span> <span class="token string">\'d\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">\'d\'</span><span class="token punctuation">,</span> <span class="token string">\'e\'</span><span class="token punctuation">,</span> <span class="token string">\'f\'</span><span class="token punctuation">,</span> <span class="token string">\'g\'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// output: 3</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>setDifference<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<h2 id="code-classlanguage-textweaksetcode"><a href="#code-classlanguage-textweaksetcode" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">WeakSet</code></h2>\n<p>A <code class="language-text">WeakSet</code> is basically the combination of a <code class="language-text">Set</code> and a <code class="language-text">WeakMap</code>. Just like a <code class="language-text">Set</code> it only contains unique values. And just like a <code class="language-text">WeakMap</code> its not iterable, the values <strong>must</strong> be objects, and those values are available for garbage collection.</p>\n<p>The use case for a <code class="language-text">WeakSet</code> is similar to that of a <code class="language-text">WeakMap</code>, except the data you wanted to store in the object is a simple boolean. Essentially the presence of the object in the set is all the information you need.</p>\n<p>Let’s take our <code class="language-text">WeakMap</code> example from before, but instead of keeping track of how many times a <code class="language-text">&lt;p&gt;</code> tag had been clicked, we just want to know that it had been clicked:</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token comment">// set up set of clicked nodes</span>\n<span class="token keyword">let</span> clickedNodes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// on each click, add the p to the set</span>\n<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">\'p\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">let</span> pNode <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>\n\n    clickedNodes<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pNode<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>And because the <code class="language-text">WeakSet</code> holds onto its references <em>weakly</em>, if a DOM node is removed from the DOM or otherwise has no other references to it, it’ll also be removed from the <code class="language-text">WeakSet</code> object.</p>\n<h2 id="inheriting-from-collections"><a href="#inheriting-from-collections" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inheriting from collections</h2>\n<p>So let’s wrap up our discussion and talk about creating derived classes from these new collection objects. We learned in the article on <a href="/learning-es6-classes/#inheritable-built-ins">classes</a> that native classes can now be derived in ES6.</p>\n<p>We may want to derive from <code class="language-text">Map</code> to add the following functionality:</p>\n<ul>\n<li><code class="language-text">Map.prototype.get(key, defaultValue)</code> to retrieve a default value if the value for the specified key didn’t exist (or was <code class="language-text">undefined</code>)</li>\n<li><code class="language-text">Map.prototype.filter(testFunc)</code> so that we don’t have to convert into an intermediary array to create a new filtered <code class="language-text">Map</code></li>\n<li><code class="language-text">Map.prototype.map(mapFunc)</code> so that we don’t have to convert into an intermediary array to create a new <code class="language-text">Map</code> with mapped values</li>\n<li><code class="language-text">Map.prototype.clone(iterable)</code> as an alternative to passing a <code class="language-text">Map</code> object to the <code class="language-text">Map</code> constructor</li>\n<li><code class="language-text">Map.convert(vanillaObj)</code> to go from an ES5-style map to an ES6 <code class="language-text">Map</code></li>\n</ul>\n<p>We may want to derive from <code class="language-text">Set</code> to add the following functionality:</p>\n<ul>\n<li><code class="language-text">Set.prototype.addAll(iterable)</code> to add a list of items to the set in one call instead of having to iterate over a list and call <code class="language-text">Set.prototype.add()</code> on each iteration</li>\n<li><code class="language-text">Set.prototype.hasAll(iterable)</code> to check to see if every item in the list is in the set</li>\n<li><code class="language-text">Set.prototype.deleteAll(iterable)</code> to delete every item in the list from the set</li>\n<li><code class="language-text">Set.prototype.some(testFunc)</code> to return <code class="language-text">true</code> if <code class="language-text">testFunc</code> returns <code class="language-text">true</code> for one of the items in the set</li>\n<li><code class="language-text">Set.prototype.every(testFunc)</code> to return <code class="language-text">true</code> if <code class="language-text">testFunc</code> returns <code class="language-text">true</code> for all of the items in the set</li>\n<li><code class="language-text">Set.prototype.union(otherSet)</code> to union the set with another set</li>\n<li><code class="language-text">Set.prototype.intersection(otherSet)</code> to intersect the set with another set</li>\n<li><code class="language-text">Set.prototype.difference(otherSet)</code> to get the difference between the set and another set</li>\n</ul>\n<h2 id="javascript-engine-support"><a href="#javascript-engine-support" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JavaScript engine support</h2>\n<p>Because these 4 new collections aren’t new syntax, but new APIs, polyfills are needed to provide functionality for <code class="language-text">Map</code>, <code class="language-text">Set</code>, <code class="language-text">WeakMap</code> &#x26; <code class="language-text">WeakSet</code>. Babel &#x26; TypeScript partner with the <a href="https://github.com/zloirock/core-js"><code class="language-text">core-js</code></a> library to provide the polyfills for the 4 collections. Traceur itself has polyfills for <code class="language-text">Map</code> &#x26; <code class="language-text">Set</code> but not for <code class="language-text">WeakMap</code> or <code class="language-text">WeakSet</code>.</p>\n<p>All of the modern browsers and servers support all 4 collections, so this is the rare case where there is <em>more</em> functionality in the browsers than in the transpiler.</p>\n<h2 id="additional-resources"><a href="#additional-resources" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Additional resources</h2>\n<p>As always, you can check out the <a href="/learning-es6/#new-collections"><em>Learning ES6</em> examples page</a> for the <a href="https://github.com/benmvp/learning-es6"><em>Learning ES6</em> Github repo</a> where you will find all of the code used in this article running natively in the browser. You can also get some practice with ES6 collections using <a href="http://es6katas.org/">ES6 Katas</a>.</p>\n<p>There is also lots of great reading to deep dive into these ES6 collections:</p>\n<ul>\n<li><a href="http://exploringjs.com/es6/ch_maps-sets.html">Maps and Sets</a> in <a href="http://exploringjs.com/es6/"><em>Exploring ES6</em></a> by <a href="https://twitter.com/rauschma">Axel Rauschmayer</a></li>\n<li><a href="http://ponyfoo.com/articles/es6-maps-in-depth">ES6 Maps in Depth</a> in <a href="http://ponyfoo.com/articles/tagged/es6-in-depth"><em>ES6 in Depth</em></a> by <a href="https://twitter.com/nzgb">Nicolas Bevacqua</a></li>\n<li><a href="http://ponyfoo.com/articles/es6-weakmaps-sets-and-weaksets-in-depth">ES6 WeakMaps, Sets, and WeakSets in Depth</a> in <a href="http://ponyfoo.com/articles/tagged/es6-in-depth"><em>ES6 in Depth</em></a> by <a href="https://twitter.com/nzgb">Nicolas Bevacqua</a></li>\n</ul>\n<h2 id="coming-up-next"><a href="#coming-up-next" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Coming up next…</h2>\n<p>After much build up, we’re finally going to talk about iterators and iterables. By now you should have a pretty high-level understanding of how they work, but we’ll deep dive into them so we can have a full understanding. They’ll also provide a nice groundwork for generators to follow afterwards. Until then…</p>',
fields:{slug:"/learning-es6-new-collections/",prefix:"2015-12-20"},frontmatter:{title:"New collections",subTitle:"The Learning ES6 Series",cover:{childImageSharp:{resize:{src:"/static/many-coins-ee61c4debabeb34c2a48943ee402f925-ada8c.jpg"}}}}},author:{id:"/home/travis/build/benmvp/benmvp.github.io/content/parts/author.md absPath of file >>> MarkdownRemark",html:'<p>Ben is a Christian, husband and father of 2 girls, with a dozen years of experience developing user interfaces for the Web. He currently is a Principal Frontend Engineer at Eventbrite on the Frontend Platform team, focused on improving their React-based design system and frontend infrastructure. Ben also enjoys playing basketball, DIY, watching movies, and <a href="https://twitter.com/benmvp">tweeting</a> / <a href="http://www.benmvp.com">blogging</a> about his experiences with new web technologies.</p>'},footnote:{id:"/home/travis/build/benmvp/benmvp.github.io/content/parts/footnote.md absPath of file >>> MarkdownRemark",html:'<ul>\n<li>© Ben Ilegbodu 2018.</li>\n<li>Powered by <a href="https://www.gatsbyjs.org/">Gatsby</a> &#x26; <a href="https://reactjs.org">React</a> using <a href="https://github.com/greglobinski/gatsby-starter-personal-blog">gatsby-starter-personal-blog</a>.</li>\n</ul>'}},pathContext:{slug:"/learning-es6-new-collections/"}}}});
//# sourceMappingURL=path---learning-es-6-new-collections-280bba399bae9e45fc54.js.map